from flask import Flask,render_template,jsonify,request
from flask_migrate import Migrate
from models import *
from api.user import *
from api.form import *

'''

░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
░░░█████░░█████░░░░██░░██░░░░
░░░░░██░░░██░░██░░░██░░██░░░░
░░░░░██░░░██░░██░░░██░░██░░░░
░░░░░██░░░██░░░██░░██░░██░░░░
░░░░░██░░░██░░░██░░██████░░░░
░░░░░██░░░██░░░██░░██░░██░░░░
░░░░░██░░░██░░██░░░██░░██░░░░
░██░███░░░██░░██░░░██░░██░░░░
░░███░░░░░█████░░░░██░░██░░░░
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░
░░░░░░░░░░░░░░░░░░░░░░░░░░░░░

¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶____________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶_______________¶_____¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶______________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶________________________¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶__________________________¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶_____¶____________________¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶_¶______________________¶_¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶__¶_______________________¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶_¶____________________¶__¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶_¶___¶¶¶_________¶¶___¶__¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶_____¶¶¶¶¶__¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶____¶¶¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶___¶¶¶¶¶______¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶____¶¶¶________¶¶¶¶___¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶_________¶¶¶__________¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_______¶¶¶¶________¶¶¶¶¶¶¶¶¶¶___¶¶¶
¶¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶____¶¶¶¶¶______¶¶¶¶¶¶¶¶¶¶¶¶___¶¶¶
¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶____¶_¶¶_____¶¶¶¶¶¶¶¶¶¶¶_¶¶__¶¶¶
¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶____________¶¶¶¶¶¶¶¶__¶¶¶¶___¶¶
¶¶___¶¶¶_¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶_¶_¶¶¶¶¶¶¶¶_¶¶¶¶¶¶¶___¶
¶¶__¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶____¶_¶¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶¶¶___
¶___¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶____
___¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶¶
__¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶¶¶_¶¶¶__¶¶¶¶¶¶¶¶¶_¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶__¶¶¶__¶¶¶¶¶¶__¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶_¶¶¶¶¶¶__¶¶¶¶_¶_¶¶¶¶¶__¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶_¶¶¶__¶¶_¶¶¶¶¶_¶¶¶¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_¶¶¶_¶¶¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶_¶¶¶¶¶___¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_¶__¶¶__¶¶_¶¶¶¶¶_¶¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶¶¶__¶__¶_¶¶¶¶¶¶¶¶¶¶¶__¶__¶¶_¶¶¶¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶¶_¶__¶_¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶__¶¶_¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶¶¶__¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶_¶__¶¶¶¶¶¶¶¶¶
¶¶¶¶¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶___¶¶¶¶¶
¶¶¶__¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶__¶¶
¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶¶
'''

#Запускаем фласк, templates - папка шаблонов
app = Flask(__name__,template_folder='templates')

#Указываем путь к БД для SQLAlchemy
app.config["SQLALCHEMY_DATABASE_URI"] = "postgresql://admin:JDH@localhost:5432/data"

#Отключить уведомления об операциях(хз как работает)
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False

#Хватаем БД из файла models и инициализируем нашим приложением
db.init_app(app)

#Мигрирование БД
migrate = Migrate(app,db)



#Подключение API для user
app.add_url_rule("/user",view_func=get_user,methods = ["GET"])
app.add_url_rule("/user/username",view_func=get_user_by_username,methods = ["GET"])
app.add_url_rule("/user/login",view_func=login,methods = ["POST"])

app.add_url_rule("/user",view_func=create_user,methods = ["POST"])
app.add_url_rule("/user",view_func=update_user,methods = ["PUT"])
app.add_url_rule("/user",view_func=delete_user,methods = ["DELETE"])


app.add_url_rule("/form",view_func=get_all_forms,methods = ["GET"])
app.add_url_rule("/form/id",view_func=get_form_by_id,methods = ["GET"])


#Главная страница
@app.route('/', methods=['GET', 'POST'])
def index():
	return render_template("index.html",name = ", niger")

#Запуск
if __name__ == '__main__':
	app.run(debug=True)